(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61f4c3a4"],{"06e6":function(e,t,s){"use strict";s("fc49")},"221b":function(e,t,s){"use strict";s("9894")},9894:function(e,t,s){},ecac:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[e.user?s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,xs:24}},[s("user-card",{attrs:{user:e.user}})],1),s("el-col",{attrs:{span:18,xs:24}},[s("account",{attrs:{user:e.user}})],1)],1)],1):e._e()])},r=[],i=s("5530"),o=s("2f62"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Personal Center")])]),s("div",{staticClass:"user-profile"},[s("div",{staticClass:"box-center"},[s("pan-thumb",{attrs:{height:"100px",width:"100px",hoverable:!1}},[s("div",[e._v("Hello")]),e._v(" "+e._s(e.user.nickName)+" ")])],1),s("div",{staticClass:"box-center"},[s("div",{staticClass:"user-name text-center"},[e._v(e._s(e.user.userName))])]),s("div",{staticClass:"box-center"},[s("el-button",{attrs:{type:"primary"},on:{click:e.repwdHandler}},[e._v("Change Password")])],1),s("div",{staticClass:"box-center"},[s("el-switch",{attrs:{"active-text":"Two-factor Authentication"},on:{change:e.mfaChangeHandler},model:{value:this.user.mfa,callback:function(t){e.$set(this.user,"mfa",t)},expression:"this.user.mfa"}})],1),e.mfa?s("div",{staticClass:"box-center"},[s("p",[e._v("Please use the "),s("el-link",{attrs:{type:"success",target:"_blank",href:""}},[e._v("OTP application")]),e._v(" to scan the QR code below to obtain a 6-digit verification code. ")],1),e.mfaQrcode?s("img",{staticClass:"qrcode",attrs:{src:e.mfaQrcode,alt:"qrcode"},on:{click:e.getQrcode}}):e._e(),s("p",{staticClass:"secret"},[e._v("Key: "+e._s(e.otpInfo.secret))]),s("el-input",{staticClass:"input-with-select mfacode",attrs:{placeholder:"Please enter the verification code"},model:{value:e.otpInfo.code,callback:function(t){e.$set(e.otpInfo,"code",t)},expression:"otpInfo.code"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.bindOtp},slot:"append"},[e._v("Bind")])],1)],1):e._e()]),s("el-dialog",{attrs:{title:"Change Password",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[s("el-form-item",{attrs:{label:"Old Password",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password",clearable:""},model:{value:e.temp.oldPassword,callback:function(t){e.$set(e.temp,"oldPassword",t)},expression:"temp.oldPassword"}})],1),s("el-form-item",{attrs:{label:"New Password",prop:"password"}},[s("el-input",{attrs:{type:"password",clearable:""},model:{value:e.temp.password,callback:function(t){e.$set(e.temp,"password",t)},expression:"temp.password"}})],1),s("el-form-item",{attrs:{label:"Confirm Password",prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password",clearable:""},model:{value:e.temp.confirmPassword,callback:function(t){e.$set(e.temp,"confirmPassword",t)},expression:"temp.confirmPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" Cancel ")]),s("el-button",{attrs:{type:"primary"},on:{click:e.repwd}},[e._v(" Confirm ")])],1)],1)],1)},l=[],c=(s("d3b7"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[s("div",{staticClass:"pan-info"},[s("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),s("div",{staticClass:"pan-thumb"})])}),u=[],d=(s("a9e3"),{name:"PanThumb",props:{zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),p=d,m=(s("221b"),s("2877")),f=Object(m["a"])(p,c,u,!1,null,"6b3694fd",null),h=f.exports,b=s("c24f"),v=s("5f87"),w={components:{PanThumb:h},props:{user:{type:Object,default:function(){return{id:"",userName:"",nickName:"",email:"",phone:"",lastLogin:"",mfa:!1}}}},data:function(){var e=this,t=function(t,s,a){""===s?a(new Error("This field is required")):s!==e.temp.password?a(new Error("The two password entries do not match")):a()};return{dialogFormVisible:!1,mfa:!1,mfaQrcode:"",otpInfo:{secret:"",code:"",interval:0},temp:{oldPassword:"",password:"",confirmPassword:""},rules:{oldPassword:[{required:!0,message:"This field is required",trigger:"blur"}],confirmPassword:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,message:"This field is required",trigger:"blur"}]}}},methods:{resetTemp:function(){this.temp={oldPassword:"",password:"",confirmPassword:""}},repwdHandler:function(){this.resetTemp(),this.dialogFormVisible=!0},repwd:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&Object(b["g"])(e.temp).then((function(t){e.$notify.success({title:"Notice",message:t.data})})).finally((function(){e.dialogFormVisible=!1}))}))},mfaChangeHandler:function(e){var t=this;e?(this.mfa=!0,this.getQrcode()):this.$confirm("Are you sure you want to turn off two-factor authentication?","Disable Authentication",{type:"warning"}).then((function(){t.otpInfo={secret:"",code:"",interval:0},Object(b["d"])().then((function(e){t.user.mfa=!1,Object(v["f"])(t.user),t.mfa=!1,t.$notify.success({title:"Notice",message:e.data})}))}))},getQrcode:function(){var e=this;Object(b["f"])().then((function(t){var s=t.data;e.otpInfo.secret=s.secret,e.otpInfo.interval=s.interval,e.mfaQrcode=s.qrImg}))},bindOtp:function(){var e=this;""===this.otpInfo.code&&this.$notify.error({title:"Error",message:"Verification code cannot be empty"}),Object(b["a"])(this.otpInfo).then((function(t){e.$notify.success({title:"Notice",message:t.data}),e.user.mfa=!0,Object(v["f"])(e.user),e.mfa=!1}))}}},g=w,y=(s("06e6"),Object(m["a"])(g,n,l,!1,null,"73e29f42",null)),x=y.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticStyle:{padding:"20px"}},[s("el-form",[s("el-form-item",{attrs:{label:"Account"}},[s("el-input",{model:{value:e.tmp.userName,callback:function(t){e.$set(e.tmp,"userName","string"===typeof t?t.trim():t)},expression:"tmp.userName"}})],1),s("el-form-item",{attrs:{label:"Username"}},[s("el-input",{model:{value:e.tmp.nickName,callback:function(t){e.$set(e.tmp,"nickName","string"===typeof t?t.trim():t)},expression:"tmp.nickName"}})],1),s("el-form-item",{attrs:{label:"Email"}},[s("el-input",{model:{value:e.tmp.email,callback:function(t){e.$set(e.tmp,"email","string"===typeof t?t.trim():t)},expression:"tmp.email"}})],1),s("el-form-item",{attrs:{label:"Phone Number"}},[s("el-input",{model:{value:e.tmp.phone,callback:function(t){e.$set(e.tmp,"phone","string"===typeof t?t.trim():t)},expression:"tmp.phone"}})],1),s("p",[e._v("Last Login Time: "+e._s(e.tmp.lastLogin))]),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Update")])],1)],1)],1)},P=[],k={props:{user:{type:Object,default:function(){return{id:"",userName:"",nickName:"",email:"",phone:"",lastLogin:"",mfa:!1}}}},data:function(){return{tmp:{}}},created:function(){this.tmp=this.user},methods:{submit:function(){var e=this,t=this.user;Object(b["h"])(t).then((function(){Object(v["f"])(e.tmp),e.$notify({message:"Update successful!",type:"success"})}))}}},C=k,O=Object(m["a"])(C,_,P,!1,null,null,null),$=O.exports,N={name:"Profile",components:{UserCard:x,Account:$},data:function(){return{user:{}}},computed:Object(i["a"])({},Object(o["b"])(["userinfo"])),created:function(){this.getUser()},methods:{getUser:function(){this.user=Object(v["b"])()}}},j=N,I=Object(m["a"])(j,a,r,!1,null,null,null);t["default"]=I.exports},fc49:function(e,t,s){}}]);