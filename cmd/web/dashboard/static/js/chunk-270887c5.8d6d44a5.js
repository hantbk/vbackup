(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-270887c5"],{"0f89":function(t,e,a){"use strict";a("5db5")},"23a9":function(t,e,a){"use strict";a("aa3e")},"5db5":function(t,e,a){},"5fd4":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return r}));var i=a("b775");function n(t){return Object(i["a"])({url:"/dashboard/index",method:"get",params:t})}function s(){return Object(i["a"])({url:"/dashboard/doGetAllRepoStats",method:"post"})}function r(t){return Object(i["a"])({url:"/dashboard/logs",method:"get",params:t})}},9406:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("span",{staticClass:"duration"},[t._v("Statistics Time: "+t._s(t.dateformat(t.backupinfo.time))+" Duration: "+t._s(t.backupinfo.duration))]),a("i",{staticClass:"refresh-btn",class:t.refresh_icon,on:{click:t.doGetAllRepoStats}}),a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{"start-val":1,"end-val":t.backupinfo.dataDayNum,text:"Days of Data Protection",suffix:t.backupinfo.dataDayUnit,icon:"el-icon-time","icon-color":"icon-green"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{countto:!1,text:"Data Volume",cvalue:t.backupinfo.dataStr,icon:"el-icon-s-data","icon-color":"icon-blue"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{"start-val":1,"end-val":t.backupinfo.fileTotal,text:"Number of Files","icon-color":"icon-red",icon:"el-icon-files"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{"start-val":1,"end-val":t.backupinfo.snapshotsNum,text:"Number of Snapshots","icon-color":"icon-blue",icon:"el-icon-s-flag"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{countto:!1,cvalue:t.planinfo.runningCount+" / "+t.planinfo.total,text:"Number of Tasks",icon:"el-icon-tickets","icon-color":"icon-red"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("panel",{attrs:{countto:!1,cvalue:t.repoinfo.runningCount+" / "+t.repoinfo.total,text:"Number of Repositories",icon:"el-icon-coin","icon-color":"icon-green"}})],1)],1),a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("pie_chart",{attrs:{title:"Backup Data Volume Statistics",cdata:t.chartsize,theme:"shine",seriesname:"Unit: GB"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("pie_chart",{attrs:{title:"Backup File Count Statistics",cdata:t.chartfile,theme:"shine"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:8}},[a("pie_chart",{attrs:{title:"Backup Snapshot Count Statistics",cdata:t.chartsnap,theme:"shine"}})],1)],1)],1)},n=[],s=(a("a9e3"),a("b680"),a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-panel"},[a("div",{class:"card-panel-icon-wrapper "+t.iconColor},[a("i",{class:"el-card-icon "+t.icon})]),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" "+t._s(t.text)+" ")]),t.countto?a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":t.startVal,"end-val":t.endVal,duration:t.duration,suffix:t.suffix,prefix:t.prefix,separator:t.separator}}):a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.cvalue))])],1)])}),r=[],o=a("ec1b"),c=a.n(o),l={components:{CountTo:c.a},props:{countto:{type:Boolean,default:!0},cvalue:{type:String,default:""},startVal:{type:Number,default:0},endVal:{type:Number,default:0},suffix:{type:String,default:""},separator:{type:String,default:""},prefix:{type:String,default:""},text:{type:String,default:""},icon:{type:String,default:""},iconColor:{type:String,default:""},duration:{type:Number,default:1e3}},methods:{}},d=l,u=(a("0f89"),a("2877")),f=Object(u["a"])(d,s,r,!1,null,"7c975d3b",null),p=f.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-wrapper",style:{height:t.height,width:t.width}})},m=[],b=a("313e"),v=a.n(b),S=a("ed08"),g={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(S["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("a524"),a("817d"),a("9fad"),a("074e"),a("7799"),a("fff9");var y={mixins:[g],props:{title:{type:String,default:""},subtitle:{type:String,default:""},seriesname:{type:String,default:""},cdata:{type:Array,default:{}},theme:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},watch:{cdata:function(t){this.chart&&this.refresh(t)}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{refresh:function(t){var e=this.chart.getOption();e.series[0].data=t,this.chart.setOption(e)},initChart:function(){this.chart=v.a.init(this.$el,this.theme),this.chart.setOption({title:{text:this.title,subtext:this.subtitle,left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:this.seriesname,type:"pie",radius:"50%",data:this.cdata,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},!0)}}},_=y,z=(a("23a9"),Object(u["a"])(_,h,m,!1,null,"3def94a5",null)),x=z.exports,C=a("5fd4"),$={name:"Dashboard",components:{Panel:p,pie_chart:x},mixins:[g],data:function(){return{backupinfo:{},planinfo:{},repoinfo:{},chartsize:[],chartfile:[],chartsnap:[],refresh_icon:"el-icon-refresh-left"}},created:function(){this.InitData()},methods:{dateformat:function(t){return Object(S["a"])(t,"yyyy-MM-dd hh:mm:ss")},InitData:function(){var t=this;Object(C["b"])().then((function(e){var a=e.data.backupInfo,i=e.data.planInfo,n=e.data.repositoryInfo;a.dataDayNum=Number(a.dataDay.split(" ")[0]),a.dataDayUnit=a.dataDay.split(" ")[1],a.dataSizeStrNum=Number(a.dataSizeStr.split(" ")[0]),a.dataSizeStrUnit=a.dataSizeStr.split(" ")[1],a.TotalUncompressedSizeStrNum=Number(a.TotalUncompressedSizeStr.split(" ")[0]),a.TotalUncompressedSizeStrUnit=a.TotalUncompressedSizeStr.split(" ")[1],a.dataStr=a.TotalUncompressedSizeStrNum+a.TotalUncompressedSizeStrUnit+"("+a.dataSizeStrNum+a.dataSizeStrUnit+")-"+a.compressionSpaceSaving+"%",t.backupinfo=a,t.planinfo=i,t.repoinfo=n,t.loadChart(e.data.backupInfos)}))},doGetAllRepoStats:function(){var t=this;this.refresh_icon="el-icon-loading",Object(C["a"])().then((function(e){t.$notify.success({message:"Statistics are being calculated, please refresh the page later...",title:"Notification"})})).finally((function(){t.refresh_icon="el-icon-refresh-left"}))},loadChart:function(t){for(var e=t.length,a=0;a<e;a++){var i=t[a];this.chartsize.push({value:(i.dataSize/1e3/1e3/1e3).toFixed(2),name:i.repositoryName}),this.chartfile.push({value:i.fileTotal,name:i.repositoryName}),this.chartsnap.push({value:i.snapshotsNum,name:i.repositoryName})}}}},E=$,N=(a("aa47"),Object(u["a"])(E,i,n,!1,null,"1dfdf6bf",null));e["default"]=N.exports},aa3e:function(t,e,a){},aa47:function(t,e,a){"use strict";a("cb56")},cb56:function(t,e,a){}}]);